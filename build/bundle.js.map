{"version":3,"sources":["node_modules/browserify/node_modules/browser-pack/_prelude.js","bundle.js","src/index.js","node_modules/ls-wrapper/index.js","node_modules/ls-wrapper/lib/index.js","node_modules/ls-wrapper/node_modules/js-type-check/index.js","node_modules/ls-wrapper/node_modules/js-type-check/lib/typecheck.js","src/API/index.js","src/auth/index.js","src/balance/ctrl.js","src/balance/factory.js","src/balance/index.js","src/expense/ctrl.js","src/expense/factory.js","src/expense/index.js","src/filters/index.js","src/group/factory.js","src/group/index.js","src/history/ctrl.js","src/history/index.js","src/interceptor/index.js","src/login/index.js","src/ls/index.js","src/main/index.js","src/router/index.js","src/user/ctrl.js","src/user/factory.js","src/user/index.js"],"names":["e","t","n","r","s","o","u","a","require","i","f","Error","code","l","exports","call","length",1,"module","_interopRequireWildcard","obj","__esModule","default","_API","_API2","_auth","_auth2","_balance","_balance2","_expense","_expense2","_money","_group","_group2","_history","_history2","_interceptor","_interceptor2","_login","_login2","_ls","_ls2","_main","_main2","_router","_router2","_user","_user2","angular","factory","controller","ctrl","config","hp","interceptors","push","defaults","headers","Content-Type","filter","money","./API","./auth","./balance","./expense","./filters","./group","./history","./interceptor","./login","./ls","./main","./router","./user",2,"./lib",3,"Wrapper","prefix","get","name","key","_ref","JSON","parse","localStorage","getItem","val","type","Date","set","data","stringify","_getType","getType","setItem","drop","removeItem","Object","defineProperty","value","js-type-check",4,"./lib/typecheck",5,"isNumber","Number","isFinite","isString","str","isBool","bool","isRegex","regex","RegExp","isDate","date","isArray","xs","Array","isNull","isUndefined","x","undefined","isDefined","isFunction","fn","isObject","prototype","toString","slice","isError","err","typeCheck","constructor","toLowerCase","checkers","string","object","number","boolean","regexp","array","function",6,"$http","$window","group","API","balance","id","success","res","expense","save","method","url","all","destroy","expenses","console","log","login","user","email","password","authorization","btoa","register","settings","members",7,"ls","$state","loggedIn","_loggedIn","apply","this","arguments","token","_res$data$groups$shift","groups","shift","go","logout",8,"getBalances","balances","vm","error",9,"forEach","split",10,"_factory","_factory2","_ctrl","_ctrl2","./ctrl","./factory",11,"expenseFactory","then","spender","map","member",12,"events",13,14,"amt","toFixed",15,"pop",16,17,"getHistory","history","item","_ls$get","shared","checkDeletion","idx","shareId","deleteExpenses","deletions","confirmed","confirm","deleted",18,19,"request","test","api",20,"auth","selectLogin","actions","failure","message","select","action","submit",21,"ls-wrapper",22,"collapsed","toggleCollapsed",23,"$url","$locationProvider","html5Mode","otherwise","state","templateUrl",24,25,26],"mappings":"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","file":"bundle.js","sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})",null,"import API from './API';\nimport auth from './auth';\nimport balance from './balance';\nimport expense from './expense';\nimport {money} from './filters';\nimport group from './group';\nimport history from './history';\nimport interceptor from './interceptor';\nimport login from './login';\nimport ls from './ls';\nimport main from './main';\nimport router from './router';\nimport user from './user';\n\nangular.module('flatdosh', ['templates', 'ui.bootstrap', 'ui.router'])\n  // FACTORIES\n  .factory('API', ['$http', '$window', 'group', API])\n  .factory('auth', ['ls', 'API', '$state', 'group', auth])\n  .factory('balance', ['API', balance.factory])\n  .factory('expense', ['API', expense.factory])\n  .factory('group', ['ls', group.factory])\n  .factory('interceptor', ['ls', interceptor])\n  .factory('ls', [ls])\n  .factory('user', [user.factory])\n  // CONTROLLERS\n  .controller('balanceCtrl', ['balance', balance.ctrl])\n  .controller('expenseCtrl', ['expense', 'group', 'ls', expense.ctrl])\n  .controller('loginCtrl', ['auth', '$state', login])\n  .controller('historyCtrl', ['expense', 'ls', history.ctrl])\n  .controller('mainCtrl', ['auth', '$state', 'group', main])\n  .controller('userCtrl', ['user', user.ctrl])\n  //CONFIG\n  .config(['$httpProvider', hp => {\n    hp.interceptors.push('interceptor');\n    //['interceptor'].forEach(interceptor => hp.interceptors.push(interceptor));\n    hp.defaults.headers.delete = {\n      'Content-Type': 'application/json'\n    }\n  }])\n  .config(['$stateProvider', '$urlRouterProvider', '$locationProvider', router])\n  .filter('money', money);\n","module.exports = require('./lib');\n","'use strict';\n\nObject.defineProperty(exports, '__esModule', {\n  value: true\n});\nexports['default'] = Wrapper;\n\nvar _getType = require('js-type-check');\n\nfunction Wrapper(prefix) {\n\n  return {\n\n    get: function get(name) {\n      var key = prefix ? '' + prefix + '.' + name : name;\n\n      var _ref = JSON.parse(localStorage.getItem(key)) || {};\n\n      var val = _ref.val;\n      var type = _ref.type;\n\n      return type === 'date' ? new Date(val) : val;\n    },\n\n    set: function set(name, data) {\n      var key = prefix ? '' + prefix + '.' + name : name;\n      var val = JSON.stringify({ val: data, type: _getType.getType(data) });\n      return localStorage.setItem(key, val);\n    },\n\n    drop: function drop(name) {\n      return localStorage.removeItem(prefix ? '' + prefix + '.' + name : name);\n    }\n\n  };\n}\n\nmodule.exports = exports['default'];","module.exports = require('./lib/typecheck');\n","'use strict';\n\nObject.defineProperty(exports, '__esModule', {\n  value: true\n});\nexports.isNumber = isNumber;\nexports.isString = isString;\nexports.isBool = isBool;\nexports.isRegex = isRegex;\nexports.isDate = isDate;\nexports.isArray = isArray;\nexports.isNull = isNull;\nexports.isUndefined = isUndefined;\nexports.isDefined = isDefined;\nexports.isFunction = isFunction;\nexports.isObject = isObject;\nexports.isError = isError;\nexports.typeCheck = typeCheck;\nexports.getType = getType;\n\nfunction isNumber(n) {\n\n  return Number.isFinite(n);\n}\n\nfunction isString(str) {\n\n  return typeof str === 'string';\n}\n\nfunction isBool(bool) {\n\n  return typeof bool === 'boolean';\n}\n\nfunction isRegex(regex) {\n\n  return regex instanceof RegExp;\n}\n\nfunction isDate(date) {\n\n  return date instanceof Date;\n}\n\nfunction isArray(xs) {\n\n  return Array.isArray(xs);\n}\n\nfunction isNull(n) {\n\n  return n === null;\n}\n\nfunction isUndefined(x) {\n\n  return x === undefined;\n}\n\nfunction isDefined(x) {\n\n  return !isUndefined(x);\n}\n\nfunction isFunction(fn) {\n\n  return typeof fn === 'function';\n}\n\nfunction isObject(obj) {\n\n  // use prototype method in case toString has been overridden\n  return obj ? Object.prototype.toString.call(obj).slice(8, -1) === 'Object' : false;\n}\n\nfunction isError(err) {\n\n  return err instanceof Error;\n}\n\nfunction typeCheck(type, val) {\n\n  var t = type.prototype.constructor.name.toLowerCase();\n\n  var checkers = {\n    string: isString,\n    object: isObject,\n    number: isNumber,\n    boolean: isBool,\n    regexp: isRegex,\n    date: isDate,\n    array: isArray,\n    'function': isFunction\n  };\n\n  return checkers[t](val);\n}\n\nfunction getType(val) {\n\n  var str = Object.prototype.toString.call(val);\n\n  return str.slice(8, -1).toLowerCase();\n}","export default function($http, $window, group) {\n\n  let API = 'https://flatdosh.com/api/';\n\n  /* @if NODE_ENV=='dev' */\n    API = 'http://api.dev/flatdosh/';\n  /* @endif */\n\n  return {\n\n    balance () {\n\n      return $http.get(`${API}balance/${group.id}`).success(res => res.data);\n\n    },\n\n    expense: {\n\n      save (data) {\n\n        return $http({\n          method: 'post',\n          url: `${API}expense`,\n          data\n        });\n\n      },\n\n      all () {\n\n        return $http.get(`${API}expense/${group.id}`);\n\n      },\n\n      destroy (expenses) {\n\n        console.log(expenses);\n\n        return $http({\n\n          method: 'delete',\n          url: API + 'expense',\n          data: expenses\n\n        });\n\n      }\n\n    },\n\n    login (user) {\n\n      let {email, password} = user;\n\n      let authorization = 'Basic ' + $window.btoa(`${email}:${password}`);\n\n      return $http({\n        method: 'post',\n        url: `${API}login`,\n        headers: {authorization}\n      });\n\n    },\n\n    register (user) {\n\n      return $http({\n        method: 'post',\n        url: API + 'register',\n        data: user\n      });\n    },\n\n    settings () {\n      return $http.get(API + 'settings');\n    },\n\n    members () {\n      return $http.get(`${API}members/${group.id}`);\n    }\n\n  };\n\n}\n","export default function(ls, API, $state, group) {\n\n  let loggedIn = !!ls.get('token');\n\n  return {\n\n    loggedIn () {\n      return loggedIn;\n    },\n\n    login (user) {\n      return API.login(user)\n        .success(res => {\n          ls.set('token', res.token);\n          ls.set('user', res.data);\n\n          // set group as first group (only one at moment)\n          let {id, name} = res.data.groups.shift();\n          group.id = id;\n          group.name = name;\n\n          loggedIn = true;\n\n          $state.go('main.balances');\n\n        });\n    },\n\n    logout () {\n      // drop user and group also?\n      ls.drop('token');\n      loggedIn = false;\n    },\n\n    register (user) {\n      return API.register(user);\n    }\n\n  };\n\n}\n","export default function(balance) {\n\n  let vm = this;\n\n  function getBalances() {\n    balance.get()\n      .success(balances => vm.balances = balances)\n      .error(err => console.log(err));\n  }\n\n  getBalances();\n\n}\n","export default function(API) {\n\n  return {\n\n    get () {\n\n      return API.balance()\n        .success(balances => {\n\n          // stupid email addresses..\n          balances.forEach(balance => {\n            balance.name = balance.name.split('@').shift();\n          });\n\n          return balances;\n\n        });\n\n    }\n\n  };\n\n}\n","import factory from './factory';\nimport ctrl from './ctrl';\n\nexport default {ctrl, factory};\n","export default function(expenseFactory, group, ls) {\n\n  let vm = this;\n\n  vm.expense = {};\n\n  vm.save = function() {\n\n    vm.expense.group = group.id;\n\n    expenseFactory.save(vm.expense).then( () => {\n      // clear the form;\n      vm.expense = {\n        spender: vm.expense.spender\n      }\n    });\n\n  };\n\n  // should be in user model\n  // sets default value\n  vm.expense.spender = ls.get('user').id;\n\n  expenseFactory.members()\n    .success(members => {\n\n      vm.members = members.map(member => {\n\n        return {\n          name: member.name.split('@').shift(),\n          id: member.email\n        };\n\n      });\n\n    });\n}\n","export default function(API, events) {\n\n  return {\n\n    all () {\n\n      return API.expense.all()\n        .then(res => res.data);\n\n    },\n\n    save (expense) {\n\n      return API.expense.save(expense)\n        .then(res => res.data);\n\n    },\n\n    destroy (expenses) {\n\n      return API.expense.destroy(expenses)\n        .then(res => res.data);\n\n    },\n\n    members () {\n      return API.members();\n    }\n\n  };\n\n}\n","import factory from './factory';\nimport ctrl from './ctrl';\n\nexport default {ctrl, factory};\n","export function money() {\n\n  return function(val) {\n\n    let amt = +val;\n\n    //return amt < 0 ? `-£${(-amt).toFixed(2)}` : `£${amt.toFixed(2)}`;\n    return amt <= 0 ? 'Nothing' : `£${amt.toFixed(2)}`;\n\n  };\n\n}\n","export default function(ls) {\n\n  let user = ls.get('user');\n\n  if (!user) {\n    return {};\n  } else {\n    // only one group at the moment...\n    // take the first\n    return user.groups.pop();\n  }\n\n}\n","import factory from './factory';\n\nexport default {factory};\n","export default function(expenseFactory, ls) {\n\n  let vm = this;\n\n  // could be undefined? -> should return empty object\n  let {id, shared} = ls.get('user');\n  vm.user = id;\n  vm.shared = shared;\n\n  vm.history = [];\n\n  vm.checkDeletion = function(idx) {\n    let shareId = vm.history[idx].shareId;\n    // null if not exist\n    if (shareId) {\n      vm.history.filter(e => {\n        return e.user !== id && e.shareId === shareId;\n      }).forEach(e => e.delete = !e.delete);\n    }\n  }\n\n  function getHistory() {\n    expenseFactory.all().then(history => {\n      history.forEach(item => item.name = item.name.split('@').shift());\n      vm.history = history;\n    });\n  }\n\n  getHistory();\n\n  vm.deleteExpenses = function() {\n\n    let deletions = vm.history\n      .filter(e => e.delete)\n      .map(e => e.id);\n\n    let confirmed = confirm('Delete selected expenses?');\n\n    if (deletions.length > 0 && confirmed) {\n\n      expenseFactory.destroy(deletions).then(res => {\n        // success?\n        \n        // mark deleted rather than another API call to server\n        res.deleted.forEach(id => {\n          vm.history.forEach(e => {\n            if (e.id === id) {\n              e.deleted = true;\n            }\n          });\n        });\n      });\n    }\n\n  };\n\n}\n","import ctrl from './ctrl';\n\nexport default {ctrl};\n","export default function(ls) {\n\n  return {\n\n    request (config) {\n\n      // don't attach token to login request\n      let login = /\\/login$/.test(config.url);\n      let api = /\\/api/.test(config.url);\n\n      if (api && !login) {\n        config.headers.authorization = `Bearer ${ls.get('token')}`;\n      }\n\n      return config;\n\n    }\n\n  };\n\n}\n","export default function(auth, $state) {\n\n  let vm = this;\n\n  if (auth.loggedIn()) {\n    return $state.go('main.balances');\n  }\n\n  vm.selectLogin = true;\n\n  let actions = {\n\n    login () {\n      auth.login(vm.user)\n      .error(failure => {\n\n        let message;\n        if (!failure || !failure.message) {\n          message = 'Server error';\n        } else {\n          message = failure.message;\n        }\n\n        vm.error = message;\n\n        switch (message) {\n          case 'Bad password':\n            vm.user.password = null;\n            break;\n          case 'User not found':\n            vm.user = null;\n            break;\n        }\n      });\n\n    },\n    register () {\n      auth.register(vm.user)\n        .success(() => {\n          actions.login();\n        })\n        .error(err => console.log(err));\n    }\n  };\n\n  vm.select = function(type) {\n    vm.action = type;\n  };\n\n  vm.submit = function() {\n    actions[vm.action]();\n  };\n\n}\n","import ls from 'ls-wrapper';\n\nexport default function() {\n\n  return ls('flatdosh');\n\n}\n","export default function(auth, $state, group) {\n\n  let vm = this;\n\n  let loggedIn = auth.loggedIn();\n\n  if (!loggedIn) {\n    $state.go('login');\n  }\n\n  vm.group = group;\n\n  // set initial states\n  vm.collapsed = true;\n\n  vm.logout = function() {\n    auth.logout();\n    $state.go('login');\n  };\n\n  vm.toggleCollapsed = function() {\n    vm.collapsed = !vm.collapsed;\n  };\n\n}\n","export default function($state, $url, $locationProvider) {\n\n  $locationProvider.html5Mode(true);\n\n  $url.otherwise('/');\n\n  $state\n  .state('login', {\n    url: '/',\n    templateUrl: 'login/index.html'\n  })\n  .state('main', {\n    templateUrl: 'main/index.html'\n  })\n  .state('main.balances', {\n    url: '/balances',\n    templateUrl: 'balance/index.html'\n  })\n  .state('main.save', {\n    url: '/expense',\n    templateUrl: 'expense/index.html'\n  })\n  .state('main.history', {\n    url: '/expense/history',\n    templateUrl: 'history/index.html'\n  })\n}\n","export default function() {\n\n  let vm = this;\n\n  vm.loggedIn = false;\n\n}\n","export default function(ls) {\n  return {\n  };\n}\n","import factory from './factory';\nimport ctrl from './ctrl';\n\nexport default {ctrl, factory};\n"],"sourceRoot":"/source/"}