!function e(t,n,r){function u(o,i){if(!n[o]){if(!t[o]){var a="function"==typeof require&&require;if(!i&&a)return a(o,!0);if(s)return s(o,!0);var l=new Error("Cannot find module '"+o+"'");throw l.code="MODULE_NOT_FOUND",l}var c=n[o]={exports:{}};t[o][0].call(c.exports,function(e){var n=t[o][1][e];return u(n?n:e)},c,c.exports,e,t,n,r)}return n[o].exports}for(var s="function"==typeof require&&require,o=0;o<r.length;o++)u(r[o]);return u}({1:[function(e,t,n){"use strict";var r=function(e){return e&&e.__esModule?e:{"default":e}},u=e("./API"),s=r(u),o=e("./auth"),i=r(o),a=e("./balance"),l=r(a),c=e("./expense"),f=r(c),d=e("./filters"),p=e("./history"),v=r(p),h=e("./login"),_=r(h),y=e("./ls"),g=r(y),b=e("./main"),m=r(b),x=e("./pubsub"),M=r(x),O=e("./register"),j=r(O),L=e("./user"),P=r(L);angular.module("flatdosh",["templates","ui.bootstrap"]).factory("API",["$http","$window",s["default"]]).factory("auth",["ls",i["default"]]).factory("balance",["API",l["default"].factory]).factory("expense",["API","pubsub",f["default"].factory]).factory("login",["API","ls","pubsub",_["default"].factory]).factory("ls",[g["default"]]).factory("pubsub",[M["default"]]).factory("register",["API",j["default"].factory]).factory("user",[P["default"].factory]).controller("balanceCtrl",["balance","pubsub",l["default"].ctrl]).controller("expenseCtrl",["expense","pubsub",f["default"].ctrl]).controller("loginCtrl",["login","register",_["default"].ctrl]).controller("historyCtrl",["expense","pubsub",v["default"].ctrl]).controller("mainCtrl",["ls","pubsub",m["default"]]).controller("userCtrl",["user",P["default"].ctrl]).config(["$httpProvider",function(e){["auth"].forEach(function(t){return e.interceptors.push(t)})}]).filter("money",d.money)},{"./API":7,"./auth":8,"./balance":11,"./expense":14,"./filters":15,"./history":17,"./login":20,"./ls":21,"./main":22,"./pubsub":23,"./register":25,"./user":28}],2:[function(e,t,n){function r(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function u(e){return"function"==typeof e}function s(e){return"number"==typeof e}function o(e){return"object"==typeof e&&null!==e}function i(e){return void 0===e}t.exports=r,r.EventEmitter=r,r.prototype._events=void 0,r.prototype._maxListeners=void 0,r.defaultMaxListeners=10,r.prototype.setMaxListeners=function(e){if(!s(e)||0>e||isNaN(e))throw TypeError("n must be a positive number");return this._maxListeners=e,this},r.prototype.emit=function(e){var t,n,r,s,a,l;if(this._events||(this._events={}),"error"===e&&(!this._events.error||o(this._events.error)&&!this._events.error.length)){if(t=arguments[1],t instanceof Error)throw t;throw TypeError('Uncaught, unspecified "error" event.')}if(n=this._events[e],i(n))return!1;if(u(n))switch(arguments.length){case 1:n.call(this);break;case 2:n.call(this,arguments[1]);break;case 3:n.call(this,arguments[1],arguments[2]);break;default:for(r=arguments.length,s=new Array(r-1),a=1;r>a;a++)s[a-1]=arguments[a];n.apply(this,s)}else if(o(n)){for(r=arguments.length,s=new Array(r-1),a=1;r>a;a++)s[a-1]=arguments[a];for(l=n.slice(),r=l.length,a=0;r>a;a++)l[a].apply(this,s)}return!0},r.prototype.addListener=function(e,t){var n;if(!u(t))throw TypeError("listener must be a function");if(this._events||(this._events={}),this._events.newListener&&this.emit("newListener",e,u(t.listener)?t.listener:t),this._events[e]?o(this._events[e])?this._events[e].push(t):this._events[e]=[this._events[e],t]:this._events[e]=t,o(this._events[e])&&!this._events[e].warned){var n;n=i(this._maxListeners)?r.defaultMaxListeners:this._maxListeners,n&&n>0&&this._events[e].length>n&&(this._events[e].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[e].length),"function"==typeof console.trace&&console.trace())}return this},r.prototype.on=r.prototype.addListener,r.prototype.once=function(e,t){function n(){this.removeListener(e,n),r||(r=!0,t.apply(this,arguments))}if(!u(t))throw TypeError("listener must be a function");var r=!1;return n.listener=t,this.on(e,n),this},r.prototype.removeListener=function(e,t){var n,r,s,i;if(!u(t))throw TypeError("listener must be a function");if(!this._events||!this._events[e])return this;if(n=this._events[e],s=n.length,r=-1,n===t||u(n.listener)&&n.listener===t)delete this._events[e],this._events.removeListener&&this.emit("removeListener",e,t);else if(o(n)){for(i=s;i-->0;)if(n[i]===t||n[i].listener&&n[i].listener===t){r=i;break}if(0>r)return this;1===n.length?(n.length=0,delete this._events[e]):n.splice(r,1),this._events.removeListener&&this.emit("removeListener",e,t)}return this},r.prototype.removeAllListeners=function(e){var t,n;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[e]&&delete this._events[e],this;if(0===arguments.length){for(t in this._events)"removeListener"!==t&&this.removeAllListeners(t);return this.removeAllListeners("removeListener"),this._events={},this}if(n=this._events[e],u(n))this.removeListener(e,n);else for(;n.length;)this.removeListener(e,n[n.length-1]);return delete this._events[e],this},r.prototype.listeners=function(e){var t;return t=this._events&&this._events[e]?u(this._events[e])?[this._events[e]]:this._events[e].slice():[]},r.listenerCount=function(e,t){var n;return n=e._events&&e._events[t]?u(e._events[t])?1:e._events[t].length:0}},{}],3:[function(e,t,n){t.exports=e("./lib")},{"./lib":4}],4:[function(e,t,n){"use strict";function r(e){return{get:function(t){var n=e?""+e+"."+t:t,r=JSON.parse(localStorage.getItem(n))||{},u=r.val,s=r.type;return"date"===s?new Date(u):u},set:function(t,n){var r=e?""+e+"."+t:t,s=JSON.stringify({val:n,type:u.getType(n)});return localStorage.setItem(r,s)},drop:function(t){return localStorage.removeItem(e?""+e+"."+t:t)}}}Object.defineProperty(n,"__esModule",{value:!0}),n["default"]=r;var u=e("js-type-check");t.exports=n["default"]},{"js-type-check":5}],5:[function(e,t,n){t.exports=e("./lib/typecheck")},{"./lib/typecheck":6}],6:[function(e,t,n){"use strict";function r(e){return Number.isFinite(e)}function u(e){return"string"==typeof e}function s(e){return"boolean"==typeof e}function o(e){return e instanceof RegExp}function i(e){return e instanceof Date}function a(e){return Array.isArray(e)}function l(e){return null===e}function c(e){return void 0===e}function f(e){return!c(e)}function d(e){return"function"==typeof e}function p(e){return e?"Object"===Object.prototype.toString.call(e).slice(8,-1):!1}function v(e){return e instanceof Error}function h(e,t){var n=e.prototype.constructor.name.toLowerCase(),l={string:u,object:p,number:r,"boolean":s,regexp:o,date:i,array:a,"function":d};return l[n](t)}function _(e){var t=Object.prototype.toString.call(e);return t.slice(8,-1).toLowerCase()}Object.defineProperty(n,"__esModule",{value:!0}),n.isNumber=r,n.isString=u,n.isBool=s,n.isRegex=o,n.isDate=i,n.isArray=a,n.isNull=l,n.isUndefined=c,n.isDefined=f,n.isFunction=d,n.isObject=p,n.isError=v,n.typeCheck=h,n.getType=_},{}],7:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n["default"]=function(e,t){var n="https://api.damonmcminn.com/flatdosh/";return{balance:function(){return e.get(n+"balance").success(function(e){return e.data})},expense:{save:function(t){return e({method:"post",url:""+n+"expense",data:t})},all:function(){return e.get(""+n+"expense")}},login:function(r){var u=r.email,s=r.password,o="Basic "+t.btoa(""+u+":"+s);return e({method:"post",url:""+n+"login",headers:{authorization:o}})},register:function(t){return e({method:"post",url:n+"register",data:t})}}},t.exports=n["default"]},{}],8:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n["default"]=function(e){return{request:function(t){var n=/\/login$/.test(t.url);return n?t:(t.headers.authorization="Bearer "+e.get("token"),t)}}},t.exports=n["default"]},{}],9:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n["default"]=function(e,t){function n(){e.get().success(function(e){return r.balances=e})}var r=this;n(),t.sub("update balances",function(e){n()})},t.exports=n["default"]},{}],10:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n["default"]=function(e){return{get:function(){return e.balance().success(function(e){var t=e.reduce(function(e,t){return e.balance<t.balance?e:t});return t.balance<0?t.danger=!0:null,e.filter(function(e){return!e.danger&&e.balance<0}).forEach(function(e){e.balance===t.balance?e.danger=!0:e.warning=!0}),e.forEach(function(e){e.name=e.name.split("@").shift()}),e})}}},t.exports=n["default"]},{}],11:[function(e,t,n){"use strict";var r=function(e){return e&&e.__esModule?e:{"default":e}};Object.defineProperty(n,"__esModule",{value:!0});var u=e("./factory"),s=r(u),o=e("./ctrl"),i=r(o);n["default"]={ctrl:i["default"],factory:s["default"]},t.exports=n["default"]},{"./ctrl":9,"./factory":10}],12:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n["default"]=function(e,t){var n=this;t.pub("page","save"),n.save=function(){e.save(n.expense).then(function(){t.pub("update balances"),n.expense=null})}},t.exports=n["default"]},{}],13:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n["default"]=function(e,t){return{all:function(){return e.expense.all().then(function(e){return e.data})},save:function(t){return e.expense.save(t).then(function(e){return e.data})}}},t.exports=n["default"]},{}],14:[function(e,t,n){"use strict";var r=function(e){return e&&e.__esModule?e:{"default":e}};Object.defineProperty(n,"__esModule",{value:!0});var u=e("./factory"),s=r(u),o=e("./ctrl"),i=r(o);n["default"]={ctrl:i["default"],factory:s["default"]},t.exports=n["default"]},{"./ctrl":12,"./factory":13}],15:[function(e,t,n){"use strict";function r(){return function(e){var t=+e;return 0>t?"-£"+(-t).toFixed(2):"£"+t.toFixed(2)}}Object.defineProperty(n,"__esModule",{value:!0}),n.money=r},{}],16:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n["default"]=function(e,t){function n(){e.all().then(function(e){return r.history=e})}var r=this;r.history=[],n(),t.sub("update balances",function(){return n()})},t.exports=n["default"]},{}],17:[function(e,t,n){"use strict";var r=function(e){return e&&e.__esModule?e:{"default":e}};Object.defineProperty(n,"__esModule",{value:!0});var u=e("./ctrl"),s=r(u);n["default"]={ctrl:s["default"]},t.exports=n["default"]},{"./ctrl":16}],18:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n["default"]=function(e,t){var n=this;n.select=function(e){n.action=e},n.selectLogin=!0,n.submit=function(){r[n.action]()};var r={login:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(){e["do"](n.user).error(function(e){var t=e.message;switch(n.error=t,t){case"Bad password":n.user.password=null;break;case"User not found":n.user=null}})}),register:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(){t["do"](n.user).success(function(e){r.login()}).error(function(e){return console.log(e)})})}},t.exports=n["default"]},{}],19:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n["default"]=function(e,t,n){return{"do":function(r){return e.login(r).success(function(e){return t.set("token",e.token),t.set("user",e.data),n.pub("login",!0),null})}}},t.exports=n["default"]},{}],20:[function(e,t,n){"use strict";var r=function(e){return e&&e.__esModule?e:{"default":e}};Object.defineProperty(n,"__esModule",{value:!0});var u=e("./factory"),s=r(u),o=e("./ctrl"),i=r(o);n["default"]={ctrl:i["default"],factory:s["default"]},t.exports=n["default"]},{"./ctrl":18,"./factory":19}],21:[function(e,t,n){"use strict";var r=function(e){return e&&e.__esModule?e:{"default":e}};Object.defineProperty(n,"__esModule",{value:!0});var u=e("ls-wrapper"),s=r(u);n["default"]=function(){return s["default"]("flatdosh")},t.exports=n["default"]},{"ls-wrapper":3}],22:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n["default"]=function(e,t){var n=this,r=e.get("user");if(r){var u=r.name;n.name=u}n.change=function(e){n.toggleCollapsed(),n.page=e},t.sub("page",function(e){return n.page=e}),t.sub("login",function(t){if(t){n.loggedIn=!0;var r=e.get("user"),u=r.name;n.name=u}}),n.loggedIn=!!e.get("token"),n.logout=function(){e.drop("token"),e.drop("user"),n.loggedIn=!1},n.collapsed=!0,n.toggleCollapsed=function(){n.collapsed=!n.collapsed}},t.exports=n["default"]},{}],23:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=e("events"),u=new r.EventEmitter;n["default"]=function(){return{sub:u.on,pub:u.emit}},t.exports=n["default"]},{events:2}],24:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n["default"]=function(e){return{"do":function(t){return e.register(t)}}},t.exports=n["default"]},{}],25:[function(e,t,n){"use strict";var r=function(e){return e&&e.__esModule?e:{"default":e}};Object.defineProperty(n,"__esModule",{value:!0});var u=e("./factory"),s=r(u);n["default"]={factory:s["default"]},t.exports=n["default"]},{"./factory":24}],26:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n["default"]=function(){var e=this;e.loggedIn=!1},t.exports=n["default"]},{}],27:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n["default"]=function(){return{}},t.exports=n["default"]},{}],28:[function(e,t,n){"use strict";var r=function(e){return e&&e.__esModule?e:{"default":e}};Object.defineProperty(n,"__esModule",{value:!0});var u=e("./factory"),s=r(u),o=e("./ctrl"),i=r(o);n["default"]={ctrl:i["default"],factory:s["default"]},t.exports=n["default"]},{"./ctrl":26,"./factory":27}]},{},[1]);
//# sourceMappingURL=bundle.js.map